const e=window.disco.h;class t{render(){const t=["disco-card"];return this.selected&&t.push("disco-card--selected"),[e("div",{class:t.join(" ")},e("slot",{name:"header"}),e("hr",null),e("slot",null))]}static get is(){return"disco-card"}static get properties(){return{selected:{type:Boolean,attr:"selected"}}}static get style(){return":root{--text:#12425b;--text-light:#888;--text-heavy:#092634;--paper:#f2f2f2;--drop-shadow:#d6d6d6;--love:#e55d5d;--font-family:Arial,sans-serif;--font-size:14px;--border-radius:4px;--padding:1rem}disco-card .disco-card{background-color:var(--paper);border-radius:4px;-webkit-box-shadow:5px 6px 7px 0 var(--text-light);box-shadow:5px 6px 7px 0 var(--text-light);display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;height:180px;margin:12px 0;max-height:180px;min-height:180px;padding:18px 24px}disco-card .disco-card hr{margin:0}disco-card .disco-card p{margin:0;margin-top:9px;max-height:100px;overflow:auto;padding:0}disco-card .disco-card--selected{-webkit-box-shadow:8px 9px 11px 0 var(--text-light);box-shadow:8px 9px 11px 0 var(--text-light);-webkit-transform:translate3d(-6px,-7px,0);transform:translate3d(-6px,-7px,0);-webkit-transition-duration:.6s;transition-duration:.6s;-webkit-transition-property:-webkit-box-shadow,-webkit-transform;transition-property:-webkit-box-shadow,-webkit-transform;transition-property:box-shadow,transform;transition-property:box-shadow,transform,-webkit-box-shadow,-webkit-transform;-webkit-transition-timing-function:cubic-bezier(.16,1,.29,.99);transition-timing-function:cubic-bezier(.16,1,.29,.99)}"}}class s{constructor(){this.value="",this.valueLabel="",this.width="192",this.maxlength="",this.minlength="",this.placeholder=""}componentWillLoad(){if(this.value&&this.options&&this.options.length>0){const e=this.options.find(e=>e.value===this.value);e&&(this.valueLabel=e.label)}}discoDropDownOptionSelectedHandler(e){this.value=e.detail.value||"",this.valueLabel=e.detail.label||"",this.discoDropDownSelected.emit({value:this.value,label:this.valueLabel}),this.onInputClickAway()}onInputClick(e){const t=this;document.addEventListener("click",function s(a){e.target.parentElement.contains(a.target)&&"disco-dropdown__list-option"!==e.target.className||(t.show=!1,this.removeEventListener("click",s))}),this.show=!0}onInputClickAway(){this.show=!1}render(){const t=this.label?e("disco-label",null,this.label):void 0,s=this.error?e("disco-error",null,this.error):void 0,a=["disco-dropdown__list",this.show?"disco-dropdown__list--show":void 0];return[t,e("div",{class:"disco-dropdown__value-container",style:{width:`${this.width}px`},onClick:e=>this.onInputClick(e),onBlur:this.onInputClickAway.bind(this)},this.value?e("div",{class:"disco-dropdown__value"},this.valueLabel):e("div",{class:"disco-dropdown__placeholder"},this.placeholder),e("div",{class:a.join(" ")},e("ul",{class:"disco-dropdown__list-ul"},this.show&&this.options&&this.options.map(t=>e("disco-option",{selected:this.value===t.value,value:t.value,label:t.label}))))),s]}static get is(){return"disco-dropdown"}static get properties(){return{el:{elementRef:!0},error:{type:String,attr:"error"},label:{type:String,attr:"label"},maxlength:{type:String,attr:"maxlength"},minlength:{type:String,attr:"minlength"},options:{type:"Any",attr:"options"},placeholder:{type:String,attr:"placeholder"},show:{state:!0},value:{type:String,attr:"value",mutable:!0},valueLabel:{type:String,attr:"value-label",mutable:!0},width:{type:String,attr:"width"}}}static get events(){return[{name:"discoDropDownSelected",method:"discoDropDownSelected",bubbles:!0,cancelable:!0,composed:!0}]}static get listeners(){return[{name:"discoDropDownOptionSelected",method:"discoDropDownOptionSelectedHandler"}]}static get style(){return"\@charset \"UTF-8\";:root{--text:#12425b;--text-light:#888;--text-heavy:#092634;--paper:#f2f2f2;--drop-shadow:#d6d6d6;--love:#e55d5d;--font-family:Arial,sans-serif;--font-size:14px;--border-radius:4px;--padding:1rem}disco-dropdown .disco-dropdown__value-container{display:inline-block;margin-bottom:6px;margin-top:9px;position:relative;width:100%}disco-dropdown .disco-dropdown__placeholder,disco-dropdown .disco-dropdown__value{font-family:var(--font-family);font-size:1rem;font-weight:300;line-height:1rem;border-radius:var(--border-radius);border:1px solid var(--text-light);-webkit-box-sizing:border-box;box-sizing:border-box;height:36px;padding:.6rem 1rem;width:100%}disco-dropdown .disco-dropdown__placeholder:after,disco-dropdown .disco-dropdown__value:after{content:\"â–¿\";position:absolute;top:6px;right:1rem}disco-dropdown .disco-dropdown__placeholder{color:var(--text-light)}disco-dropdown .disco-dropdown__list{display:none;background:#fff;border-radius:4px;-webkit-box-shadow:0 1px 4px 0 var(--text-light);box-shadow:0 1px 4px 0 var(--text-light);position:absolute;left:0;top:36px;width:100%;z-index:100}disco-dropdown .disco-dropdown__list--show{display:block}disco-dropdown .disco-dropdown__list-ul{list-style:none;padding:0;margin:12px 0}"}}class a{render(){const t=new Date(this.game.created_at),s=`${t.getMonth()+1}-${t.getDate()}-${t.getFullYear()}`;return e("disco-card",{selected:this.selected,onClick:e=>this.discoGameCardSelected.emit(this.game)},e("disco-header",{slot:"header",title:this.game.name,"release-date":s,percent:this.game.rating,count:this.game.rating_count,hearts:this.game.popularity}),e("p",null,this.game.summary))}static get is(){return"disco-game-card"}static get properties(){return{game:{type:"Any",attr:"game"},selected:{type:Boolean,attr:"selected"}}}static get events(){return[{name:"discoGameCardSelected",method:"discoGameCardSelected",bubbles:!0,cancelable:!0,composed:!0}]}static get style(){return""}}class i{render(){return e("div",{class:"disco-header"},e("div",{class:"disco-header__left"},e("div",{class:"disco-header__title"},this.title),e("div",{class:"disco-header__release-date"},"Release in ",this.releaseDate)),e("div",{class:"disco-header__right"},e("disco-ratings",{percent:this.percent,count:this.count,hearts:this.hearts})))}static get is(){return"disco-header"}static get properties(){return{count:{type:String,attr:"count"},hearts:{type:String,attr:"hearts"},percent:{type:String,attr:"percent"},releaseDate:{type:String,attr:"release-date"},title:{type:String,attr:"title"}}}static get style(){return":root{--text:#12425b;--text-light:#888;--text-heavy:#092634;--paper:#f2f2f2;--drop-shadow:#d6d6d6;--love:#e55d5d;--font-family:Arial,sans-serif;--font-size:14px;--border-radius:4px;--padding:1rem}disco-header{font-family:var(--font-family);font-size:1rem;font-weight:300;line-height:1rem}disco-header .disco-header{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-wrap:wrap;flex-wrap:wrap}disco-header .disco-header__left{-ms-flex:1;flex:1;margin:0;min-width:400px}disco-header .disco-header__right{vertical-align:middle}disco-header .disco-header__title{font-family:var(--font-family);font-size:1.4rem;font-weight:800;line-height:1.4rem}disco-header .disco-header__release-date{color:var(--text-light);margin:1rem 0}"}}class r{constructor(){this.value="",this.type="text",this.width="240",this.maxlength="",this.minlength="",this.placeholder=""}onInput(e){const t=e.target;t&&(this.value=t.value||""),this.discoInput.emit(this.value)}render(){const t=this.label?e("disco-label",null,this.label):void 0,s=this.error?e("disco-error",null,this.error):void 0;return[t,e("input",{value:this.value,style:{width:`${this.width}px`},type:this.type,placeholder:this.placeholder,maxlength:this.maxlength,minlength:this.minlength,onInput:this.onInput.bind(this)}),s]}static get is(){return"disco-input"}static get properties(){return{el:{elementRef:!0},error:{type:String,attr:"error"},label:{type:String,attr:"label"},maxlength:{type:String,attr:"maxlength"},minlength:{type:String,attr:"minlength"},placeholder:{type:String,attr:"placeholder"},type:{type:String,attr:"type"},value:{type:String,attr:"value",mutable:!0},width:{type:String,attr:"width"}}}static get events(){return[{name:"discoInput",method:"discoInput",bubbles:!0,cancelable:!0,composed:!0}]}static get style(){return":root{--text:#12425b;--text-light:#888;--text-heavy:#092634;--paper:#f2f2f2;--drop-shadow:#d6d6d6;--love:#e55d5d;--font-family:Arial,sans-serif;--font-size:14px;--border-radius:4px;--padding:1rem}disco-input input{font-size:1rem;font-weight:300;line-height:1rem;border:1px solid var(--text-light);border-radius:var(--border-radius);color:var(--text-heavy);font-family:var(--font-family);height:32px;margin-bottom:6px;margin-top:9px;padding-left:var(--padding);padding-right:var(--padding)}disco-input input ::-webkit-input-placeholder{color:var(--text-light)}disco-input input :-ms-input-placeholder{color:var(--text-light)}disco-input input ::-ms-input-placeholder{color:var(--text-light)}disco-input input ::placeholder{color:var(--text-light)}"}}var l={get:function(e,t){if(!e)throw Error("igdb get requires a game identifier");let s={method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({id:e,fields:t||"*"})};return fetch("https://disco-api.herokuapp.com/get",s).then(e=>e.json())},list:function(e,t,s,a,i){var r={fields:a||"*",orderBy:i||"popularity:desc"};e&&(r.search=e),t&&(r["filter[release_dates.date][gte]"]=t),s&&(r["filter[release_dates.date][lte]"]=s);let l={method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({params:r})};return fetch("https://disco-api.herokuapp.com/list",l).then(e=>e.json())}};class o{constructor(){this.isLoading=!0,this.sortBy="name:asc",this.sortOptions=[{value:"name:asc",label:"Game title (A to Z)"},{value:"release_dates.date:desc",label:"Recently released"}]}componentWillLoad(){this.fetchData()}onDiscoGameSelected(e){e.preventDefault();const t=e.detail;this.selectedId===t.id?(this.selectedId=void 0,this.discoGameSelected.emit(void 0)):(this.selectedId=t.id,this.discoGameSelected.emit(t))}onDiscoInput(e){this.searchField=e.detail,this.fetchData()}onDiscoDropDownSelected(e){this.sortBy=e.detail.value,this.fetchData()}onDiscoReleaseYears(e){this.releaseEndYear=e.detail.endYear?`${e.detail.endYear}-12-31`:void 0,this.releaseStartYear=e.detail.startYear?`${e.detail.startYear}-01-01`:void 0,this.fetchData()}fetchData(){this.games=[],this.isLoading=!0,l.list(this.searchField,this.releaseStartYear,this.releaseEndYear,"*",this.sortBy).then(e=>{const t=e.map(e=>l.get(e.id));this.games=[],Promise.all(t).then(e=>{e.forEach(e=>{e.popularity=e.popularity?+parseFloat(e.popularity).toFixed(2):0,this.games.push(e)}),this.isLoading=!1})}).catch(e=>{this.isLoading=!1})}render(){return e("div",{class:"disco-list"},e("div",{class:"disco-list__filter"},e("disco-input",{placeholder:"Find games by title",label:" "})),e("div",{class:"disco-list__release-year"},e("disco-release-years",null)),e("div",{class:"disco-list__sort"},e("disco-dropdown",{value:this.sortBy,placeholder:"",label:"Sort By",options:this.sortOptions})),e("div",{class:"disco-list__main"},this.games&&this.games.length>0?this.games.map(t=>e("disco-game-card",{selected:t.id===this.selectedId,game:t})):e("disco-label",null,this.isLoading?"Please be patient while I load these games for you.":"Is this the apocalypse because there are no games")))}static get is(){return"disco-list"}static get properties(){return{games:{state:!0},isLoading:{state:!0},releaseEndYear:{state:!0},releaseStartYear:{state:!0},searchField:{state:!0},selectedId:{state:!0},sortBy:{state:!0}}}static get events(){return[{name:"discoGameSelected",method:"discoGameSelected",bubbles:!0,cancelable:!0,composed:!0}]}static get listeners(){return[{name:"discoGameCardSelected",method:"onDiscoGameSelected"},{name:"discoInput",method:"onDiscoInput"},{name:"discoDropDownSelected",method:"onDiscoDropDownSelected"},{name:"discoReleaseYears",method:"onDiscoReleaseYears"}]}static get style(){return":root{--text:#12425b;--text-light:#888;--text-heavy:#092634;--paper:#f2f2f2;--drop-shadow:#d6d6d6;--love:#e55d5d;--font-family:Arial,sans-serif;--font-size:14px;--border-radius:4px;--padding:1rem}disco-list .disco-list{padding:24px 72px;display:grid;grid-template-columns:240px auto 180px 192px;grid-template-rows:76px auto;grid-template-areas:\"filter . releaseyear sort\" \"main main main main\";grid-column-gap:16px;grid-row-gap:24px}disco-list .disco-list__filter{grid-area:filter}disco-list .disco-list__release-year{grid-area:releaseyear}disco-list .disco-list__sort{grid-area:sort}disco-list .disco-list__main{grid-area:main;min-height:4em;max-height:100%}"}}class n{onOptionSelected(){this.discoDropDownOptionSelected.emit({value:this.value,label:this.label})}render(){return[e("li",{class:["disco-dropdown__list-option",this.selected?"disco-dropdown__list-option--selected":void 0].join(" "),onClick:e=>this.onOptionSelected()},this.label)]}static get is(){return"disco-option"}static get properties(){return{label:{type:String,attr:"label"},selected:{type:Boolean,attr:"selected"},value:{type:String,attr:"value"}}}static get events(){return[{name:"discoDropDownOptionSelected",method:"discoDropDownOptionSelected",bubbles:!0,cancelable:!0,composed:!0}]}static get style(){return":root{--text:#12425b;--text-light:#888;--text-heavy:#092634;--paper:#f2f2f2;--drop-shadow:#d6d6d6;--love:#e55d5d;--font-family:Arial,sans-serif;--font-size:14px;--border-radius:4px;--padding:1rem}disco-option .disco-dropdown__list-option{font-family:var(--font-family);font-size:1rem;font-weight:300;line-height:1rem;list-style:none;padding:7px 1rem}disco-option .disco-dropdown__list-option:hover{background-color:var(--paper);cursor:pointer}disco-option .disco-dropdown__list-option--selected{background-color:var(--paper)}"}}class d{constructor(){this.errorMessages=[]}updateStartYear(e){e.stopPropagation(),this.startYear=e.detail,this.validateYears()}updateEndYear(e){e.stopPropagation(),this.endYear=e.detail,this.validateYears()}validateYears(){let e=Number(this.startYear),t=Number(this.endYear);this.errorMessages=[],this.startYear&&this.startYear.length>0&&this.startYear.length<4&&this.errorMessages.push("The starting year must be 4 characters long."),this.endYear&&this.endYear.length>0&&this.endYear.length<4&&this.errorMessages.push("The ending year must be 4 characters long."),(this.endYear&&this.endYear.length>0&&isNaN(t)||this.startYear&&this.startYear.length>0&&isNaN(e))&&this.errorMessages.push("The values can only be numbers."),0===this.errorMessages.length&&this.startYear&&this.endYear&&e>t&&this.errorMessages.push("The start year cannot be greater than end year."),0===this.errorMessages.length&&this.discoReleaseYears.emit({startYear:this.startYear,endYear:this.endYear})}render(){const t=this.errorMessages.map(t=>e("disco-error",null,t));return[e("disco-label",null,"Release Years"),e("div",{class:"disco-release-years__input-container"},e("disco-input",{value:this.startYear,type:"text",width:"36",maxlength:"4",minlength:"4",onDiscoInput:e=>this.updateStartYear(e)}),e("span",{class:"disco-release-years__to"},"to"),e("disco-input",{value:this.endYear,type:"text",width:"36",maxlength:"4",minlength:"4",onDiscoInput:e=>this.updateEndYear(e)})),t]}static get is(){return"disco-release-years"}static get properties(){return{endYear:{type:String,attr:"end-year",mutable:!0},startYear:{type:String,attr:"start-year",mutable:!0}}}static get events(){return[{name:"discoReleaseYears",method:"discoReleaseYears",bubbles:!0,cancelable:!0,composed:!0}]}static get style(){return":root{--text:#12425b;--text-light:#888;--text-heavy:#092634;--paper:#f2f2f2;--drop-shadow:#d6d6d6;--love:#e55d5d;--font-family:Arial,sans-serif;--font-size:14px;--border-radius:4px;--padding:1rem}disco-release-years .disco-release-years{position:relative;width:180px}disco-release-years .disco-release-years__input-container{width:180px}disco-release-years .disco-release-years__input-container disco-input{display:inline-block}disco-release-years .disco-release-years__input-container disco-input input{padding-left:.9rem;padding-right:.9rem}disco-release-years .disco-release-years__to{padding-left:1rem;padding-right:1rem}disco-release-years disco-error{width:180px}"}}export{t as DiscoCard,s as DiscoDropdown,a as DiscoGameCard,i as DiscoHeader,r as DiscoInput,o as DiscoList,n as DiscoOption,d as DiscoReleaseYears};